[package]
name = "sql_json"
version = "0.1.0"
edition = "2024"

[dependencies]
deadpool-postgres = { version = "0.14.1", features = ["rt_tokio_1"], optional = true }
deadpool-sqlite = { version = "0.12.1", features = ["bundled", "column_decltype"], optional = true }
rust_decimal = { version = "1.39.0", features = ["db-tokio-postgres", "serde"] }
serde = { version = "1.0.226", features = ["derive"] }
serde_json = { version = "1.0.145", features = ["preserve_order", "arbitrary_precision"] }
tokio-postgres = { version = "0.7.14", optional = true }
tracing = "0.1.41"
tracing-subscriber = "0.3.19"

[dev-dependencies]
anyhow = "1.0.100"
axum = "0.8.4"
tokio = "1.47.1"
tower-service = "0.3.3"

[features]
default = ["sqlite", "postgres"]
sqlite = ["dep:deadpool-sqlite"]
postgres = ["dep:deadpool-postgres", "dep:tokio-postgres"]
